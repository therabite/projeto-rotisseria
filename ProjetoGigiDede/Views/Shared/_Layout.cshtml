<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - Le Rotisserie</title>
    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/ProjetoGigiDede.styles.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Platypi:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
    <style>
        /* Forçar hamburger visível e acima do header */
        .hamburger {
            position: fixed;
            top: 18px;
            left: 18px;
            width: 44px;
            height: 36px;
            display: flex !important;
            flex-direction: column;
            justify-content: space-between;
            padding: 6px;
            z-index: 9999 !important;
            /* garante cima de tudo */
            border: none;
            background: transparent;
            cursor: pointer;
        }

        .hamburger span {
            display: block;
            height: 3px;
            background: #fff;
            border-radius: 3px;
            transition: transform 220ms ease, opacity 200ms ease;
        }
    </style>
</head>

<body>
    <!-- Hamburger -->
    <button id="hamburgerBtn" class="hamburger" aria-label="Abrir menu" aria-expanded="false" aria-controls="sideNav">
        <span></span><span></span><span></span>
    </button>

    <!-- Side nav -->
    <nav id="sideNav" class="side-nav" aria-hidden="true" aria-labelledby="sideNavTitle" role="navigation">
        <div class="side-header">
            <h2 id="sideNavTitle">navegue conosco</h2>
        </div>
        <ul class="side-list">
            <li><a class="a-color" asp-controller="Home" asp-action="Index">Home</a></li>
            <li><a class="a-color" href="#cardapio">Cardápio</a></li>
            <li><a class="a-color" href="#avaliacao">Avaliações</a></li>
            <li><a class="a-color" href="#galeria">Galeria</a></li>
            <li><a class="a-color"href="#contato">Contato</a></li>
            <li class="auth">
                <a asp-controller="Home" asp-action="Cadastro">Cadastrar</a> / <a asp-controller="Home" asp-action="Login">Login</a>
            </li>
        </ul>
    </nav>

    <!-- Overlay -->
    <div id="overlay" class="overlay" tabindex="-1" aria-hidden="true"></div>

    <!-- Top bar (logo e ícones) -->
    <header class="topbar">
        <div class="container topbar-inner">
            <div class="left"></div>

            <!-- logo como imagem -->
            <a class="logo" href="/" aria-label="Le Rotisserie - Início">
                <img src="~/img/logosem.png" alt="Logo Le Rotisserie">
            </a>

            <div class="icons">
                <a href="#" aria-label="WhatsApp" class="icon">
                    <img src="~/img/icons8-google-maps-100.png" alt="WhatsApp">
                </a>
                <a href="#" aria-label="Localização" class="icon">
                    <img src="~/img/icons8-instagram-logo-100.png" alt="Localização">
                </a>
                <a href="#" aria-label="Instagram" class="icon">
                    <img src="~/img/icons8-whatsapp-100.png" alt="Instagram">
                </a>
            </div>
        </div>
    </header>

    <div class="container">
        <main role="main" class="pb-3">
            @RenderBody()
        </main>
    </div>

    <footer class="site-footer">
        <div class="container footer-inner">
            <div class="footer-left">Le Rotisserie</div>
            <div>
                <img src="~/img/logosem.png" alt="Logo Le Rotisserie" class="footer-logo">
            </div>
            <div class="footer-right">
                <a href="#" class="small-icon" aria-label="WhatsApp">
                    <img src="~/img/icons8-google-maps-100.png" alt="WhatsApp">
                </a>
                <a href="#" class="small-icon" aria-label="Localização">
                    <img src="~/img/icons8-instagram-logo-100.png" alt="Localização">
                </a>
                <a href="#" class="small-icon" aria-label="Instagram">
                    <img src="~/img/icons8-whatsapp-100.png" alt="Instagram">
                </a>
            </div>
        </div>
    </footer>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Lógica inline: abre/fecha nav ao clicar no botão; fecha ao clicar fora/overlay; fecha com Esc
        document.addEventListener('DOMContentLoaded', function () {
            const btn = document.querySelector('.hamburguer, .hamburger, #hamburgerBtn');
            const nav = document.getElementById('sideNav');
            let overlay = document.getElementById('overlay');
            const body = document.body;
            const OPEN_CLASS = 'nav-open';

            if (!btn || !nav) return;

            // garante overlay se por acaso removido
            if (!overlay) {
                overlay = document.createElement('div');
                overlay.id = 'overlay';
                overlay.className = 'overlay';
                overlay.tabIndex = -1;
                overlay.setAttribute('aria-hidden', 'true');
                nav.parentNode.insertBefore(overlay, nav.nextSibling);
            }

            function setAria(opened) {
                btn.setAttribute('aria-expanded', String(!!opened));
                nav.setAttribute('aria-hidden', String(!opened));
                overlay.setAttribute('aria-hidden', String(!opened));
            }

            function openNav() {
                if (!body.classList.contains(OPEN_CLASS)) {
                    body.classList.add(OPEN_CLASS);
                    setAria(true);
                    body.style.overflow = 'hidden';
                    // foco no primeiro link
                    const first = nav.querySelector('a');
                    if (first) first.focus();
                }
            }

            function closeNav() {
                if (body.classList.contains(OPEN_CLASS)) {
                    body.classList.remove(OPEN_CLASS);
                    setAria(false);
                    body.style.overflow = '';
                    btn.focus();
                }
            }

            function toggleNav(e) {
                if (e) e.stopPropagation();
                if (body.classList.contains(OPEN_CLASS)) closeNav(); else openNav();
            }

            // clique no botão
            btn.addEventListener('click', toggleNav);

            // clique no overlay fecha
            overlay.addEventListener('click', function (e) {
                e.stopPropagation();
                closeNav();
            });

            // clique fora do nav e do botão fecha (fallback)
            document.addEventListener('click', function (e) {
                if (!body.classList.contains(OPEN_CLASS)) return;
                if (!nav.contains(e.target) && !btn.contains(e.target)) closeNav();
            });

            // Esc fecha
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') closeNav();
            });

            // fechar ao clicar em link do menu
            Array.from(nav.querySelectorAll('a')).forEach(function (a) {
                a.addEventListener('click', function () {
                    closeNav();
                });
            });

            // estado ARIA inicial
            if (!btn.hasAttribute('aria-expanded')) btn.setAttribute('aria-expanded', 'false');
            if (!nav.hasAttribute('aria-hidden')) nav.setAttribute('aria-hidden', 'true');
            if (!overlay.hasAttribute('aria-hidden')) overlay.setAttribute('aria-hidden', 'true');
        });
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>

</html>
